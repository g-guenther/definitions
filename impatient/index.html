<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>NeXus for the Impatient &#8212; NeXus for the Impatient</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinxdoc.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="icon" href="_static/favicon.ico"/>
    <link rel="search" title="Search" href="search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="#">NeXus for the Impatient</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">NeXus for the Impatient</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <a class="reference internal image-reference" href="_images/NeXus-logo.png"><img alt="_images/NeXus-logo.png" src="_images/NeXus-logo.png" style="width: 450px; height: 250px;" /></a>
<section id="nexus-for-the-impatient">
<h1>NeXus for the Impatient<a class="headerlink" href="#nexus-for-the-impatient" title="Permalink to this heading">¶</a></h1>
<section id="why-nexus">
<h2>Why NeXus?<a class="headerlink" href="#why-nexus" title="Permalink to this heading">¶</a></h2>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>This document is available online in
<a class="reference external" href="https://manual.nexusformat.org/impatient">HTML</a>
and
<a class="reference external" href="https://manual.nexusformat.org/_static/NXImpatient.pdf">PDF</a>
formats.</p>
</div>
<p>The NeXus data format <a class="footnote-reference brackets" href="#nexus" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a> is a tool which has been designed to
solve the problems of travelling scientists,
who undertake experiments at several different
neutron, x-ray or muon facilities. Such people will apply to
different facilities with different proposals in order to get
their science done, then combine the data thus collected at the various
sources. However, the life of a travelling scientist is complicated by
some of the following factors:</p>
<ul class="simple">
<li><p>They will find several different file formats at each facility, some
of which may even be proprietary formats which only can be read
by expensive tools.</p></li>
<li><p>They waste time writing programs to get the data into their favourite
data analysis software.</p></li>
<li><p>They may need many different files in different formats,
plus local knowledge and notes in order to analyse data.</p></li>
<li><p>They have to deal with inefficient data formats.</p></li>
<li><p>They cannot easily read their collaborators’ data.</p></li>
</ul>
<p>NeXus is designed to solve these problems by defining a data
format with the following properties:</p>
<dl class="simple">
<dt>self-describing</dt><dd><p>The content of the file can be discovered
without prior knowledge.</p>
</dd>
<dt>extendable</dt><dd><p>This means that you can always add more data to the file.</p>
</dd>
<dt>platform independent</dt><dd><p>It must be readable on UNIX, Macintosh, Windows or whatever computers.</p>
</dd>
<dt>public domain</dt><dd><p>Both the file format specifications and the API to access the file data
must be in the public domain.</p>
</dd>
<dt>efficient</dt><dd><p>Data from modern high speed detectors should be both written and read quickly.</p>
</dd>
<dt>complete</dt><dd><p>All data required for typical usage cases should be contained in one file; even
better, a full beam line description.</p>
</dd>
<dt>flexible</dt><dd><p>In order to be applicable to a wild variety of applications.</p>
</dd>
</dl>
</section>
<section id="nexus-concepts">
<h2>NeXus Concepts<a class="headerlink" href="#nexus-concepts" title="Permalink to this heading">¶</a></h2>
<p>NeXus uses <a class="reference external" href="http://www.hdfgroup.org/HDF5/">HDF-5</a>
<a class="footnote-reference brackets" href="#hdf5" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a>
files as container files. HDF-5 is a popular scientific
data format developed by the National Center for Supercomputing
Applications (NCSA), University of Illinois Urbana-Champaign  and currently
maintained by <em>The HDF Group</em>. There is built-in support for HDF-5 in many scientific
packages. Other users of HDF-5 include NASA, Boeing, meteorological offices around
the world and many more. NeXus is thus able to inherit many desirable properties
for free from HDF-5, such as: extendable, self-describing, platform independent,
public domain, and efficient. For historical reasons, NeXus supports two further
container file formats: HDF-4 and XML. The NeXus use of these formats is now deprecated.</p>
<p>To understand NeXus, it is important to know about some of the objects
encountered in an HDF-5 file:</p>
<dl class="simple">
<dt>groups</dt><dd><p>Allow structuring of information in a file. Groups work pretty much like
folders/directories in a file system.</p>
</dd>
<dt>datasets</dt><dd><p>These are multidimensional arrays of numbers and character strings.</p>
</dd>
<dt>attributes</dt><dd><p>These are little morsels of metadata which can be attached to either
groups or datasets.</p>
</dd>
<dt>links</dt><dd><p>These are pointers to HDF-5 objects which live in a different place in the
hierarchy. They remove the need to copy data when a given item needs to be
referenced at multiple places in an HDF-5 hierarchy. HDF-5 Links behave
like symbolic links in a UNIX file system.</p>
</dd>
</dl>
<p>HDF-5 does not, however, know anything about the application domain of neutron, muon or
X-ray scattering. In order to remedy this, NeXus adds the following:</p>
<dl class="simple">
<dt>A group hierarchy in the HDF-5 file</dt><dd><p>A group hierarchy in the files helps with a couple of issues. If a full beamline
description is stored, then this can easily be hundreds of parameters - a hierarchy
brings some order into a potential mess. The hierarchy also allows us to store more
then one experiment and/or result of data analysis in the same file. Thus a
NeXus file may contain a complete scientific workflow from raw data to publishable
results.</p>
</dd>
<dt>Rules for storing data in a file</dt><dd><p>NeXus wants you to store physical values, with units and uncertainty, but the
motor encoder positions,  control voltages, set points, <em>etc.</em> can be stored
as well.  Each dataset should indicate the axes required to plot the
data.  By prescribing the structure of the data fields, we minimize the
amount of variations and surprises when accessing NeXus files.</p>
</dd>
<dt>A dictionary of field names</dt><dd><p>Even with units and axes available, an item with a name like <em>stx</em> has
little meaning. NeXus provides a dictionary of names applicable to neutron,
x-ray or muon scattering and documents their meanings.</p>
</dd>
<dt>Application Definitions</dt><dd><p>In order to import data seamlessly into an application program the file producer
and the file consumer have to agree what has to be in the NeXus file for a certain
use case. This is the purpose of an application definition. Application definitions
are used to define strict standards. NeXus files can be verified against application
definitions with a special tool called nxvalidate.</p>
</dd>
<dt>Tools</dt><dd><p>In order to make dealing with HDF-5 files easier, NeXus has provided an API for reading
and writing files for many programming languages. Moreover, NeXus has coded some
tools for converting to and from NeXus as well as plotting and viewing utilities.</p>
</dd>
</dl>
<section id="the-nexus-file-hierarchy">
<h3>The NeXus File Hierarchy<a class="headerlink" href="#the-nexus-file-hierarchy" title="Permalink to this heading">¶</a></h3>
<p>NeXus defines two main group hierarchy types:</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#raw-file-hierarchy"><span class="std std-ref">The NeXus Raw Data File Hierarchy</span></a></p></li>
<li><p><a class="reference internal" href="#processed-data-hierarchy"><span class="std std-ref">The NeXus Processed Data Hierarchy</span></a></p></li>
</ol>
<p>There are additional hierarchy variations for multi-method instruments and for a
general purpose dump structure. Documentation for these hierarchy types can be
found in the NeXus manual.</p>
<section id="the-nexus-raw-data-file-hierarchy">
<span id="raw-file-hierarchy"></span><h4>The NeXus Raw Data File Hierarchy<a class="headerlink" href="#the-nexus-raw-data-file-hierarchy" title="Permalink to this heading">¶</a></h4>
<p>This hierarchy is applicable to raw data files as written by some facility instrument:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>entry:NXentry
<span class="linenos"> 2</span>   @default = data
<span class="linenos"> 3</span>   data:NXdata
<span class="linenos"> 4</span>      @signal = data
<span class="linenos"> 5</span>      data --&gt; /entry/instrument/detector/data
<span class="linenos"> 6</span>   instrument:NXinstrument
<span class="linenos"> 7</span>      source:NXsource
<span class="linenos"> 8</span>      ....
<span class="linenos"> 9</span>      detector:NXdetector
<span class="linenos">10</span>         data:NX_INT32[512,512]
<span class="linenos">11</span>   sample:NXsample
<span class="linenos">12</span>   control:NXmonitor
</pre></div>
</div>
<p>The following two groups are required for all NeXus data files:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>entry:NXentry
<span class="linenos">2</span>   data:NXdata
</pre></div>
</div>
<aside class="sidebar">
<p class="sidebar-title">About the terms: <code class="docutils literal notranslate"><span class="pre">entry:NXentry</span></code></p>
<p>A NeXus group is shown with a two-part name, as in <code class="docutils literal notranslate"><span class="pre">entry:NXentry</span></code>.
The first part, shown here as <code class="docutils literal notranslate"><span class="pre">entry</span></code> is the HDF5 group name
and can be just about
any text that is a valid variable name in most programming languages.
See the NeXus manual <a class="footnote-reference brackets" href="#manual" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>6<span class="fn-bracket">]</span></a> for full details and note that <strong>no spaces
are allowed</strong>.  The second part, shown here as <code class="docutils literal notranslate"><span class="pre">NXentry</span></code>, is the
name of the NeXus class that describes the structure within this group.</p>
</aside>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">entry:NXentry</span></code></dt><dd><p>At the top/root level of a NeXus file are the NXentry groups.
Each entry represents a separate collection of datasets.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">data:NXdata</span></code></dt><dd><p>This group is supposed to hold the most
important data items of the experiment.
This is a convenience so that a general plotting
program can identify <em>from this group alone</em> what is
the default data to render on a plot.
Therefore the data is linked here from the specific
detector entry recording the data which is described below.
Axis information is usually included here as well, the
details of which are covered in the NeXus manual.</p>
</dd>
</dl>
<p>The following additional groups are present in many NeXus data files:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">sample:NXsample</span></code></dt><dd><p>This group contains datasets which describe everything we
know about the sample, including sample environment information
such as temperature.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">instrument:NXinstrument</span></code></dt><dd><p>This group contains further groups and fields which describe
the components of the instrument (i.e. beamline for synchroton sources)
used for this experiment.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">control:NXmonitor</span></code></dt><dd><p>This group contains the counting information: which preset
was used, how long we counted, monitor counts, etc.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A few words on notation in this representation:</p>
<dl class="simple">
<dt>indentation</dt><dd><p>Describes hierarchy level</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">name:NXname</span></code></dt><dd><p>This describes a NeXus group. The second name, starting with <code class="docutils literal notranslate"><span class="pre">NX</span></code>, is the NeXus
class name of the group. Each NeXus class defines a set of allowed field names
that may be used to describe a component of the experiment,
such as detector distance and angle. Not all such names are required -
those relevant to a particular use case are specified by the appropriate application definition.
Some experiments have multiple groups
of the same class, such as apertures and detectors.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">name:NX_TYPE[dim,dim,...]</span></code></dt><dd><p>This describes a dataset with a given numeric type and dimensions.  In this
example, the detector data is a 512 x 512 array of 32-bit integers.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">&#64;name=value</span></code></dt><dd><p>This describes an attribute name and value.
Both groups and fields can have attributes.
The attribute <code class="docutils literal notranslate"><span class="pre">signal=data</span></code> indicates
to NeXus that the field in this group named <code class="docutils literal notranslate"><span class="pre">data</span></code> is the dependent data to be plotted.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">--&gt;</span>&#160; <span class="pre">path</span></code></dt><dd><p>Describes a link from one location to another.  This allows us to gather
the most important data together in an <code class="docutils literal notranslate"><span class="pre">NXdata</span></code> group while leaving
detailed metadata in the individual component definitions.
NeXus uses HDF5 hard links for pointing to other objects in the same file
and external links when pointing to objects in other HDF5 files.</p>
</dd>
</dl>
</div>
</section>
</section>
<section id="what-goes-into-a-nexus-file">
<h3>What goes into a NeXus File?<a class="headerlink" href="#what-goes-into-a-nexus-file" title="Permalink to this heading">¶</a></h3>
<p>Before starting to describe how to decide what goes into a NeXus file,
some more details about NeXus groups and base classes need to be
explained. As seen in the examples, NeXus uses groups with well-defined
class names starting with “NX”. NeXus calls these NX classes
“base classes”, which is slightly misleading when you are used to
object-oriented notations. For each NeXus base class, there
exists a dictionary description that details which other groups and
which fields are allowed in this base class. This dictionary is where you will find
appropriate field names for the data items you wish to describe. The NeXus base
classes are documented in the NeXus Reference Manual. <a class="footnote-reference brackets" href="#refdoc" id="id4" role="doc-noteref"><span class="fn-bracket">[</span>7<span class="fn-bracket">]</span></a>
A common
misconception among NeXus beginners is that you have to specify all
fields which exist in a given NeXus base class. This is <strong>not</strong>
the case! You only need to choose those fields from the NeXus base
class dictionary which make sense for your application. But, you are
encouraged to store additional, available information
since it can be used to diagnose problems with the instrument. The minimum
set of fields that are appropriate to a given technique are usually
specifed in an “application definition”.</p>
<p>Before the mechanics of writing a NeXus file can be explained, we need
to know which fields are written into the NeXus file at which position
in the hierarchy. The example will be to store basic data.
Some steps are required:</p>
<p>Example 3: NeXus Raw Data File Template</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>entry:NXentry
<span class="linenos">2</span>   instrument:NXinstrument
<span class="linenos">3</span>   sample:NXsample
<span class="linenos">4</span>   control:NXmonitor
<span class="linenos">5</span>   data:NXdata
</pre></div>
</div>
<ol class="arabic simple">
<li><p>The start is a NeXus raw data file template as shown in example 3.</p></li>
<li><p>At this level you can decide what needs to be known about the
sample and put it into the NXsample group.</p></li>
<li><p>Look at a design drawing of the instrument. For each major
instrument component find a suitable NeXus class and add it
to the NXinstrument group.</p></li>
<li><p>Decide for each instrument component which data fields are
required  and add them to the corresponding group.</p></li>
<li><p>Add required counting information to the control class.</p></li>
<li><p>Decide which data sets make up the most important data items
in the experiment. Create links to these data items in the data
group.</p></li>
<li><p>Investigate if a NeXus application definition exists for
your instrument type. If so, check if all required fields
are stored in the appropriate form.</p></li>
</ol>
<p>Before beginning this process, it might be worthwhile to look at some
of the NeXus application definitions in the NeXus reference manual
for examples and inspiration. But be aware that each NeXus application
definition only defines the minimum sets for a certain usage case.</p>
<p>In this process you might encounter the situation that you wish to
store more information then foreseen by NeXus. There are two options
which have to be considered:</p>
<ol class="arabic simple">
<li><p>The data item to store is special to your instrument and of no general
interest. Then make up a name and store it. The beauty of NeXus is
that this is possible without breaking the standard compliance
of the file.  Usual practice is to use a pattern like <code class="docutils literal notranslate"><span class="pre">facilityname_fieldname</span></code>
which is unlikely to collide with fields that are added to the NeXus
definition in the future.</p></li>
<li><p>The data item is of general interest and should be added to NeXus.
Then suggest a name and document what this really is what you suggest.
Forward this information to the NeXus International Advisory Committee
(<a class="reference external" href="mailto:nexus-committee&#37;&#52;&#48;nexusformat&#46;org">nexus-committee<span>&#64;</span>nexusformat<span>&#46;</span>org</a>).
Usually such suggestions are accepted quickly when they pose no
conflicts with existing definitions.</p></li>
</ol>
<p>Be sure that the names of things you define have no embedded whitespace
and begin with a letter.</p>
<section id="the-nexus-processed-data-hierarchy">
<span id="processed-data-hierarchy"></span><h4>The NeXus Processed Data Hierarchy<a class="headerlink" href="#the-nexus-processed-data-hierarchy" title="Permalink to this heading">¶</a></h4>
<p>This is a simplified hierarchy style applicable to the results of data
reduction or data analysis applications. Such results can consist of
large multidimensional arrays, so it can be advisable to use NeXus
for storing such data:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>entry:NXentry
<span class="linenos"> 2</span>   @entry = data
<span class="linenos"> 3</span>   reduction:NXprocess
<span class="linenos"> 4</span>      program_name = &quot;pyDataProc2010&quot;
<span class="linenos"> 5</span>      version = &quot;1.0a&quot;
<span class="linenos"> 6</span>      input:NXparameters
<span class="linenos"> 7</span>         filename = &quot;sn2013287.nxs&quot;
<span class="linenos"> 8</span>   sample:NXsample
<span class="linenos"> 9</span>   data:NXdata
<span class="linenos">10</span>      @signal = data
<span class="linenos">11</span>      data
</pre></div>
</div>
<p>Here the <code class="docutils literal notranslate"><span class="pre">NXentry</span></code> contains:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">&#64;entry</span> <span class="pre">=</span> <span class="pre">data</span></code></dt><dd><p>Attribute on the <code class="docutils literal notranslate"><span class="pre">NXentry</span></code> group pointing to the default <code class="docutils literal notranslate"><span class="pre">NXdata</span></code>
group to be plotted.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">data:NXdata</span></code></dt><dd><p>Contains the result of the data reduction directly, together with
the axes required to use the data.  The attribute <code class="docutils literal notranslate"><span class="pre">&#64;signal</span> <span class="pre">=</span> <span class="pre">data</span></code>
indicates that the field named <code class="docutils literal notranslate"><span class="pre">data</span></code> is the default plottable data.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sample:NXsample</span></code></dt><dd><p>Contains the sample information.  This may be a link to the
sample information within a measurement entry elsewhere in the file.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">reduction:NXprocess</span></code></dt><dd><p>This group is used to document what kind of processing occurred to
obtain the results stored in this <code class="docutils literal notranslate"><span class="pre">NXentry</span></code>. Here NeXus documents the name
and version of the program used to do the reduction.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">input:NXparameters</span></code></dt><dd><p>The <code class="docutils literal notranslate"><span class="pre">NXparameters</span></code> groups describe the input and output
parameters of the data reduction program. NeXus does not provide
standard names here but rather provides containers to store this
information which is important to make results reproducible.</p>
</dd>
</dl>
<p>Optionally, a processed data entry can contain an <code class="docutils literal notranslate"><span class="pre">NXinstrument</span></code> group
in order to describe the instrument if this matters at this stage.</p>
</section>
</section>
<section id="scans-in-nexus">
<h3>Scans in NeXus<a class="headerlink" href="#scans-in-nexus" title="Permalink to this heading">¶</a></h3>
<p>Scanning means to vary some variable in a certain, defined way and collect
data as the variable progresses. Scans are a versatile experimental technique and are
thus very difficult to standardize. NeXus solves this problem through
a couple of rules. Before these rules can be discussed, the symbol <strong>NP</strong>
has to be introduced. NP is simply the number of scan points.</p>
<ol class="arabic simple">
<li><p>During a scan store each varied variable as an array of length NP at its
appropriate place in the NeXus hierarchy.</p></li>
<li><p>For area detectors, the first (slowest varying) dimension becomes NP.
Example: data from an area detector is stored as
<code class="docutils literal notranslate"><span class="pre">data[NP,xdim,ydim]</span></code></p></li>
<li><p>In <code class="docutils literal notranslate"><span class="pre">NXdata</span></code>, create links to all varied parameters and the detector
data. Thus a representation similar to the conventional table
representation of a scan is achieved.</p></li>
</ol>
<p>This is an example of a NeXus raw data file describing a scan where the
sample is rotated and data is collected in an area detector:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>entry:NXentry
<span class="linenos"> 2</span>   @entry = data
<span class="linenos"> 3</span>   instrument:NXinstrument
<span class="linenos"> 4</span>      detector:NXdetector
<span class="linenos"> 5</span>         data:[NP,xsize,ysize]
<span class="linenos"> 6</span>   sample:NXsample
<span class="linenos"> 7</span>      rotation_angle[NP]
<span class="linenos"> 8</span>   control:NXmonitor
<span class="linenos"> 9</span>      data[NP]
<span class="linenos">10</span>   data:NXdata
<span class="linenos">11</span>      @signal = 1
<span class="linenos">12</span>      @axes = [&quot;rotation_angle&quot;, &quot;.&quot;, &quot;.&quot;]
<span class="linenos">13</span>      @rotation_angle_indices = 0
<span class="linenos">14</span>      data --&gt; /entry/instrument/detector/data
<span class="linenos">15</span>      rotation_angle --&gt; /entry/sample/rotation_angle
</pre></div>
</div>
<p>The default data to be plotted has more dimensions and requires
additional description.  The attribute <code class="docutils literal notranslate"><span class="pre">&#64;axes</span> <span class="pre">=</span> <span class="pre">[&quot;rotation_angle&quot;,</span> <span class="pre">&quot;.&quot;,</span> <span class="pre">&quot;.&quot;]</span></code>
implies that the “signal data” (<code class="docutils literal notranslate"><span class="pre">data</span></code>) has three dimensions.
The first dimension is provided by the <code class="docutils literal notranslate"><span class="pre">rotation_angle</span></code> field,
while the <code class="docutils literal notranslate"><span class="pre">.</span></code> for the other two dimensions indicates they each
should be plotted as index number (starting from zero).
The attribute <code class="docutils literal notranslate"><span class="pre">&#64;rotation_angle_indices</span> <span class="pre">=</span> <span class="pre">0</span></code> declares that <code class="docutils literal notranslate"><span class="pre">rotation_angle</span></code>
is used as the first dimension of <code class="docutils literal notranslate"><span class="pre">data</span></code>.  The <code class="docutils literal notranslate"><span class="pre">AXISNAME_indices</span></code>
attribute becomes more useful when both the “signal data” and the dimension
scales are multi-dimensional.</p>
</section>
<section id="finding-the-plottable-data">
<h3>Finding the plottable data<a class="headerlink" href="#finding-the-plottable-data" title="Permalink to this heading">¶</a></h3>
<p>Any program whose aim is to identify plottable data should use the following procedure:</p>
<ol class="arabic simple">
<li><p>Start at the top level of the NeXus data file
(the <em>root</em> of the HDF5 hierarchy).</p></li>
<li><p>Pick the default <code class="docutils literal notranslate"><span class="pre">NXentry</span></code> group, as designated by the <code class="docutils literal notranslate"><span class="pre">default</span></code> attribute.</p></li>
<li><p>Pick the default <code class="docutils literal notranslate"><span class="pre">NXdata</span></code> group, as designated by the <code class="docutils literal notranslate"><span class="pre">default</span></code> attribute.</p></li>
<li><p>Pick the default plottable field, as designated by the <code class="docutils literal notranslate"><span class="pre">signal</span></code> attribute.</p>
<ol class="arabic simple">
<li><p>Pick the fields with the dimension scales (the <code class="docutils literal notranslate"><span class="pre">axes</span></code> attribute).</p></li>
<li><p>Associate dimension scales with plottable data dimensions (the <code class="docutils literal notranslate"><span class="pre">AXISNAME_indices</span></code> attributes).</p></li>
<li><p>Associate the dimension scales with each dimension of the plottable data.</p></li>
</ol>
</li>
<li><p>Plot the <em>signal</em> data, given <em>axes</em> and <em>AXISNAME_indices</em>.</p></li>
</ol>
<p>For details of this process, consult this
<a class="reference external" href="https://manual.nexusformat.org/datarules.html#version-3">section</a>
of the NeXus manual. <a class="footnote-reference brackets" href="#v3" id="id5" role="doc-noteref"><span class="fn-bracket">[</span>8<span class="fn-bracket">]</span></a></p>
</section>
</section>
<section id="nexus-benefits">
<h2>NeXus Benefits<a class="headerlink" href="#nexus-benefits" title="Permalink to this heading">¶</a></h2>
<p>When trying to establish a data standard, we encounter a few challenges,
some of which can slow effort:</p>
<dl class="simple">
<dt>Science does new things</dt><dd><p>By definition, science is about doing new things, and of course new things
cannot always be forced into strict standards. Thus any standardization effort
in science will be an ongoing process.</p>
</dd>
<dt>Consensus</dt><dd><p>In order to establish a standard, a large portion of a scientific community must agree.</p>
</dd>
<dt>Resources</dt><dd><p>A data standard requires scientific programming resources to
implement in acquisition and analysis software, but such resources
are scarce especially at already established facilities.</p>
</dd>
</dl>
<p>However, there are many benefits to be gained from having the NeXus
data standard:</p>
<dl>
<dt>Discoverable format</dt><dd><p>By using a standard container format, people can examine their data
from many software packages without any coding at all.</p>
</dd>
<dt>NeXus dictionary</dt><dd><p>Using field names from a well documented dictionary gives meaning
to the data in the file.</p>
</dd>
<dt>Programming</dt><dd><p>Using suitable programming techniques a data processing program
can read any NeXus file which contains the required data easily.</p>
</dd>
<dt>Storing complete data</dt><dd><p>Storing all this metadata when saving the data takes extra effort,
but benefits include:</p>
<blockquote>
<div><ul class="simple">
<li><p>The file will include the necessary fields for yet unforeseen ways to
analyse the data.</p></li>
<li><p>If something is wrong with the data, it becomes possible to figure
out what went wrong.</p></li>
<li><p>There is a better record of what has been measured.
This helps to protect against scientific fraud.</p></li>
</ul>
</div></blockquote>
</dd>
<dt>Application definitions</dt><dd><p>For common measurement techniques with well-defined data reduction and
analysis steps, data files with all the required fields included can
be processed automatically.  The NeXus application definitions serve
the role of defining which fields are needed for a given measurement type.</p>
</dd>
</dl>
</section>
<section id="reading-nexus-files">
<h2>Reading NeXus Files<a class="headerlink" href="#reading-nexus-files" title="Permalink to this heading">¶</a></h2>
<p>The simplest way to read and plot a NeXus file is through the
nexusformat <a class="footnote-reference brackets" href="#nexusformat" id="id6" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a> Python package :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">from</span> <span class="nn">nexusformat.nexus</span> <span class="kn">import</span> <span class="n">nxopen</span>
<span class="linenos">2</span><span class="n">nxopen</span><span class="p">(</span><span class="s1">&#39;powder.h5&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
<p>In order for this to be possible, <em>nexusformat</em> uses the NeXus conventions to locate
the plottable data and the axes to use.  In particular, this plots the first
<code class="docutils literal notranslate"><span class="pre">NXdata</span></code> group in the first <code class="docutils literal notranslate"><span class="pre">NXentry</span></code> in the <code class="docutils literal notranslate"><span class="pre">powder.h5</span></code> file.  The NeXus python
package provides additional support for working with NeXus groups.</p>
<p>The plot could also be created by directly accessing the HDF-5 file using the
h5py <a class="footnote-reference brackets" href="#h5py" id="id7" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a> package:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">import</span> <span class="nn">pylab</span><span class="o">,</span> <span class="nn">h5py</span>
<span class="linenos">2</span><span class="n">file</span> <span class="o">=</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="s1">&#39;powder.h5&#39;</span><span class="p">)</span>
<span class="linenos">3</span><span class="n">pylab</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">file</span><span class="p">[</span><span class="s1">&#39;/entry1/data1/two_theta&#39;</span><span class="p">],</span> <span class="n">file</span><span class="p">[</span><span class="s1">&#39;/entry1/data1/counts&#39;</span><span class="p">])</span>
<span class="linenos">4</span><span class="n">pylab</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">file</span><span class="p">[</span><span class="s1">&#39;/entry1/title&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
<span class="linenos">5</span><span class="n">pylab</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>Matlab support in version R2011b is similar:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>&gt;&gt; two_theta = h5read(&#39;powder.h5&#39;, &#39;/entry1/data1/two_theta&#39;);
<span class="linenos">2</span>&gt;&gt; counts = h5read(&#39;powder.h5&#39;, &#39;/entry1/data1/counts&#39;);
<span class="linenos">3</span>&gt;&gt; title = h5read(&#39;powder.h5&#39;, &#39;entry1/title&#39;);
<span class="linenos">4</span>&gt;&gt; plot(two_theta, counts)
<span class="linenos">5</span>&gt;&gt; title(title)
</pre></div>
</div>
<p>Note that matlab will require explicit casting from integer data to floating
point data to perform many operations.  For example, to plot a 2D data set
<a class="footnote-reference brackets" href="#lrcs3701" id="id8" role="doc-noteref"><span class="fn-bracket">[</span>5<span class="fn-bracket">]</span></a> using log intensity:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span> &gt;&gt; data = h5read(&#39;lrcs3701.nx5&#39;,&#39;/Histogram1/data/data&#39;);
<span class="linenos">2</span> &gt;&gt; h = pcolor(log(double(data+1))); set(h,&#39;EdgeAlpha&#39;,0)
</pre></div>
</div>
<p>Support for HDF is available in other scientific computing environments,
including IDL, Igor, Mathematica and R.</p>
<p>Reading the file using the HDF-5 C API is a little more involved:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="cm">/**</span>
<span class="linenos"> 2</span><span class="cm"> * Reading example for reading NeXus files with plain</span>
<span class="linenos"> 3</span><span class="cm"> * HDF-5 API calls. This reads out counts and two_theta</span>
<span class="linenos"> 4</span><span class="cm"> * out of the file generated by nxh5write.</span>
<span class="linenos"> 5</span><span class="cm"> *</span>
<span class="linenos"> 6</span><span class="cm"> * WARNING: I left out all error checking in this example.</span>
<span class="linenos"> 7</span><span class="cm"> * In production code you have to take care of those errors</span>
<span class="linenos"> 8</span><span class="cm"> *</span>
<span class="linenos"> 9</span><span class="cm"> * Mark Koennecke, October 2011</span>
<span class="linenos">10</span><span class="cm"> */</span>
<span class="linenos">11</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;hdf5.h&gt;</span>
<span class="linenos">12</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
<span class="linenos">15</span><span class="p">{</span>
<span class="linenos">16</span><span class="w">  </span><span class="kt">float</span><span class="w"> </span><span class="o">*</span><span class="n">two_theta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="linenos">17</span><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">counts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w">  </span><span class="n">rank</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
<span class="linenos">18</span><span class="w">  </span><span class="n">hid_t</span><span class="w"> </span><span class="n">fid</span><span class="p">,</span><span class="w"> </span><span class="n">dataid</span><span class="p">,</span><span class="w"> </span><span class="n">fapl</span><span class="p">;</span>
<span class="linenos">19</span><span class="w">  </span><span class="n">hsize_t</span><span class="w"> </span><span class="o">*</span><span class="n">dim</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="linenos">20</span><span class="w">  </span><span class="n">hid_t</span><span class="w"> </span><span class="n">datatype</span><span class="p">,</span><span class="w"> </span><span class="n">dataspace</span><span class="p">,</span><span class="w"> </span><span class="n">memdataspace</span><span class="p">;</span>
<span class="linenos">21</span>
<span class="linenos">22</span><span class="w">  </span><span class="cm">/*</span>
<span class="linenos">23</span><span class="cm">   * Open file, thereby enforcing proper file close</span>
<span class="linenos">24</span><span class="cm">   * semantics</span>
<span class="linenos">25</span><span class="cm">   */</span>
<span class="linenos">26</span><span class="w">  </span><span class="n">fapl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">H5Pcreate</span><span class="p">(</span><span class="n">H5P_FILE_ACCESS</span><span class="p">);</span>
<span class="linenos">27</span><span class="w">  </span><span class="n">H5Pset_fclose_degree</span><span class="p">(</span><span class="n">fapl</span><span class="p">,</span><span class="n">H5F_CLOSE_STRONG</span><span class="p">);</span>
<span class="linenos">28</span><span class="w">  </span><span class="n">fid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">H5Fopen</span><span class="p">(</span><span class="s">&quot;NXfile.h5&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">H5F_ACC_RDONLY</span><span class="p">,</span><span class="n">fapl</span><span class="p">);</span>
<span class="linenos">29</span><span class="w">  </span><span class="n">H5Pclose</span><span class="p">(</span><span class="n">fapl</span><span class="p">);</span>
<span class="linenos">30</span>
<span class="linenos">31</span><span class="w">  </span><span class="cm">/*</span>
<span class="linenos">32</span><span class="cm">   * open and read the counts dataset</span>
<span class="linenos">33</span><span class="cm">   */</span>
<span class="linenos">34</span><span class="w">  </span><span class="n">dataid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">H5Dopen</span><span class="p">(</span><span class="n">fid</span><span class="p">,</span><span class="s">&quot;/scan/data/counts&quot;</span><span class="p">);</span>
<span class="linenos">35</span><span class="w">  </span><span class="n">dataspace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">H5Dget_space</span><span class="p">(</span><span class="n">dataid</span><span class="p">);</span>
<span class="linenos">36</span><span class="w">  </span><span class="n">rank</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">H5Sget_simple_extent_ndims</span><span class="p">(</span><span class="n">dataspace</span><span class="p">);</span>
<span class="linenos">37</span><span class="w">  </span><span class="n">dim</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="n">rank</span><span class="o">*</span><span class="k">sizeof</span><span class="p">(</span><span class="n">hsize_t</span><span class="p">));</span>
<span class="linenos">38</span><span class="w">  </span><span class="n">H5Sget_simple_extent_dims</span><span class="p">(</span><span class="n">dataspace</span><span class="p">,</span><span class="w"> </span><span class="n">dim</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
<span class="linenos">39</span><span class="w">  </span><span class="n">counts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="n">dim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">));</span>
<span class="linenos">40</span><span class="w">  </span><span class="n">memdataspace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">H5Tcopy</span><span class="p">(</span><span class="n">H5T_NATIVE_INT32</span><span class="p">);</span>
<span class="linenos">41</span><span class="w">  </span><span class="n">H5Dread</span><span class="p">(</span><span class="n">dataid</span><span class="p">,</span><span class="n">memdataspace</span><span class="p">,</span><span class="n">H5S_ALL</span><span class="p">,</span><span class="w"> </span><span class="n">H5S_ALL</span><span class="p">,</span><span class="n">H5P_DEFAULT</span><span class="p">,</span><span class="w"> </span><span class="n">counts</span><span class="p">);</span>
<span class="linenos">42</span><span class="w">  </span><span class="n">H5Dclose</span><span class="p">(</span><span class="n">dataid</span><span class="p">);</span>
<span class="linenos">43</span><span class="w">  </span><span class="n">H5Sclose</span><span class="p">(</span><span class="n">dataspace</span><span class="p">);</span>
<span class="linenos">44</span><span class="w">  </span><span class="n">H5Tclose</span><span class="p">(</span><span class="n">memdataspace</span><span class="p">);</span>
<span class="linenos">45</span>
<span class="linenos">46</span><span class="w">  </span><span class="cm">/*</span>
<span class="linenos">47</span><span class="cm">   * open and read the two_theta data set</span>
<span class="linenos">48</span><span class="cm">   */</span>
<span class="linenos">49</span><span class="w">  </span><span class="n">dataid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">H5Dopen</span><span class="p">(</span><span class="n">fid</span><span class="p">,</span><span class="s">&quot;/scan/data/two_theta&quot;</span><span class="p">);</span>
<span class="linenos">50</span><span class="w">  </span><span class="n">dataspace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">H5Dget_space</span><span class="p">(</span><span class="n">dataid</span><span class="p">);</span>
<span class="linenos">51</span><span class="w">  </span><span class="n">rank</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">H5Sget_simple_extent_ndims</span><span class="p">(</span><span class="n">dataspace</span><span class="p">);</span>
<span class="linenos">52</span><span class="w">  </span><span class="n">dim</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="n">rank</span><span class="o">*</span><span class="k">sizeof</span><span class="p">(</span><span class="n">hsize_t</span><span class="p">));</span>
<span class="linenos">53</span><span class="w">  </span><span class="n">H5Sget_simple_extent_dims</span><span class="p">(</span><span class="n">dataspace</span><span class="p">,</span><span class="w"> </span><span class="n">dim</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
<span class="linenos">54</span><span class="w">  </span><span class="n">two_theta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="n">dim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">float</span><span class="p">));</span>
<span class="linenos">55</span><span class="w">  </span><span class="n">memdataspace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">H5Tcopy</span><span class="p">(</span><span class="n">H5T_NATIVE_FLOAT</span><span class="p">);</span>
<span class="linenos">56</span><span class="w">  </span><span class="n">H5Dread</span><span class="p">(</span><span class="n">dataid</span><span class="p">,</span><span class="n">memdataspace</span><span class="p">,</span><span class="n">H5S_ALL</span><span class="p">,</span><span class="w"> </span><span class="n">H5S_ALL</span><span class="p">,</span><span class="n">H5P_DEFAULT</span><span class="p">,</span><span class="w"> </span><span class="n">two_theta</span><span class="p">);</span>
<span class="linenos">57</span><span class="w">  </span><span class="n">H5Dclose</span><span class="p">(</span><span class="n">dataid</span><span class="p">);</span>
<span class="linenos">58</span><span class="w">  </span><span class="n">H5Sclose</span><span class="p">(</span><span class="n">dataspace</span><span class="p">);</span>
<span class="linenos">59</span><span class="w">  </span><span class="n">H5Tclose</span><span class="p">(</span><span class="n">memdataspace</span><span class="p">);</span>
<span class="linenos">60</span>
<span class="linenos">61</span><span class="w">  </span><span class="n">H5Fclose</span><span class="p">(</span><span class="n">fid</span><span class="p">);</span>
<span class="linenos">62</span>
<span class="linenos">63</span><span class="w">  </span><span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">dim</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
<span class="linenos">64</span><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%8.2f %10d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">two_theta</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">counts</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="linenos">65</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">66</span>
<span class="linenos">67</span><span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To keep these examples short, we already learned the HDF addresses
of the “signal data” (such as <code class="docutils literal notranslate"><span class="pre">/entry1/data1/counts</span></code>)
and its associated dimension scales (such as <code class="docutils literal notranslate"><span class="pre">/entry1/data1/two_theta</span></code>)
for each example data file.
The examples above use those addresses directly, rather than using the
described method to find the plottable data.</p>
<p>If you are writing specific
code to process a set of NeXus files where you already know the HDF5 addresses
of the items you need, feel welcome to use that knowledge, as you have seen above.</p>
<p>If you are writing code to handle any NeXus data file, then you are advised
to implement the methods to find the plottable data,
as described in the manual.  <a class="footnote-reference brackets" href="#v3" id="id9" role="doc-noteref"><span class="fn-bracket">[</span>8<span class="fn-bracket">]</span></a></p>
</div>
<p>More examples of reading NeXus data files can be found in
the <em>Examples</em> chapter of the NeXus Reference Documentation. <a class="footnote-reference brackets" href="#refdoc" id="id10" role="doc-noteref"><span class="fn-bracket">[</span>7<span class="fn-bracket">]</span></a></p>
</section>
<section id="writing-nexus-files">
<h2>Writing NeXus Files<a class="headerlink" href="#writing-nexus-files" title="Permalink to this heading">¶</a></h2>
<p>You can obviously skip this section if you only wish to read NeXus files.</p>
<p>For writing the NeXus file, you have the option to use the NeXus API or to
use the HDF-5 API. The complexity of NeXus file writing code is
similar to the reading code. For both approaches, more information is
available in the NeXus Manual <a class="footnote-reference brackets" href="#manual" id="id11" role="doc-noteref"><span class="fn-bracket">[</span>6<span class="fn-bracket">]</span></a>
or the NeXus Reference Documentation. <a class="footnote-reference brackets" href="#refdoc" id="id12" role="doc-noteref"><span class="fn-bracket">[</span>7<span class="fn-bracket">]</span></a></p>
<p>To give you a taste of what it is like to write a NeXus file using the
NeXus API, here is a complete code example in C. It shows how to create a
<code class="docutils literal notranslate"><span class="pre">scan:NXentry/data:NXdata</span></code> structure and store two arrays, counts and
two_theta:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;napi.h&quot;</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kt">int</span><span class="w"> </span><span class="nf">writer</span><span class="p">(</span><span class="kt">float</span><span class="w"> </span><span class="o">*</span><span class="n">tth</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="o">*</span><span class="n">counts</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">)</span>
<span class="linenos"> 4</span><span class="p">{</span>
<span class="linenos"> 5</span><span class="w">   </span><span class="cm">/* we receive two arrays: tth and counts, each length n*/</span>
<span class="linenos"> 6</span><span class="w">   </span><span class="n">NXhandle</span><span class="w"> </span><span class="n">fileID</span><span class="p">;</span>
<span class="linenos"> 7</span><span class="w">   </span><span class="n">NXopen</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;NXfile.nxs&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">NXACC_CREATE</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">fileID</span><span class="p">);</span>
<span class="linenos"> 8</span><span class="w">      </span><span class="n">NXmakegroup</span><span class="w"> </span><span class="p">(</span><span class="n">fileID</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Scan&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;NXentry&quot;</span><span class="p">);</span>
<span class="linenos"> 9</span><span class="w">      </span><span class="n">NXopengroup</span><span class="w"> </span><span class="p">(</span><span class="n">fileID</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Scan&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;NXentry&quot;</span><span class="p">);</span>
<span class="linenos">10</span><span class="w">         </span><span class="n">NXmakegroup</span><span class="w"> </span><span class="p">(</span><span class="n">fileID</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;data&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;NXdata&quot;</span><span class="p">);</span>
<span class="linenos">11</span><span class="w">         </span><span class="n">NXopengroup</span><span class="w"> </span><span class="p">(</span><span class="n">fileID</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;data&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;NXdata&quot;</span><span class="p">);</span>
<span class="linenos">12</span><span class="w">            </span><span class="n">NXputattr</span><span class="w"> </span><span class="p">(</span><span class="n">fileID</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;signal&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;counts&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="n">NX_CHAR</span><span class="p">);</span>
<span class="linenos">13</span><span class="w">            </span><span class="n">NXputattr</span><span class="w"> </span><span class="p">(</span><span class="n">fileID</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;axes&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;two_theta&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w"> </span><span class="n">NX_CHAR</span><span class="p">);</span>
<span class="linenos">14</span><span class="w">            </span><span class="n">NXmakedata</span><span class="w"> </span><span class="p">(</span><span class="n">fileID</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;two_theta&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">NX_FLOAT32</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">n</span><span class="p">);</span>
<span class="linenos">15</span><span class="w">            </span><span class="n">NXopendata</span><span class="w"> </span><span class="p">(</span><span class="n">fileID</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;two_theta&quot;</span><span class="p">);</span>
<span class="linenos">16</span><span class="w">               </span><span class="n">NXputdata</span><span class="w"> </span><span class="p">(</span><span class="n">fileID</span><span class="p">,</span><span class="w"> </span><span class="n">tth</span><span class="p">);</span>
<span class="linenos">17</span><span class="w">               </span><span class="n">NXputattr</span><span class="w"> </span><span class="p">(</span><span class="n">fileID</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;units&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;degrees&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="n">NX_CHAR</span><span class="p">);</span>
<span class="linenos">18</span><span class="w">            </span><span class="n">NXclosedata</span><span class="w"> </span><span class="p">(</span><span class="n">fileID</span><span class="p">);</span><span class="w">  </span><span class="cm">/* two_theta */</span>
<span class="linenos">19</span><span class="w">            </span><span class="n">NXmakedata</span><span class="w"> </span><span class="p">(</span><span class="n">fileID</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;counts&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">NX_FLOAT32</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">n</span><span class="p">);</span>
<span class="linenos">20</span><span class="w">            </span><span class="n">NXopendata</span><span class="w"> </span><span class="p">(</span><span class="n">fileID</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;counts&quot;</span><span class="p">);</span>
<span class="linenos">21</span><span class="w">               </span><span class="n">NXputdata</span><span class="w"> </span><span class="p">(</span><span class="n">fileID</span><span class="p">,</span><span class="w"> </span><span class="n">counts</span><span class="p">);</span>
<span class="linenos">22</span><span class="w">            </span><span class="n">NXclosedata</span><span class="w"> </span><span class="p">(</span><span class="n">fileID</span><span class="p">);</span><span class="w">  </span><span class="cm">/* counts */</span>
<span class="linenos">23</span><span class="w">         </span><span class="n">NXclosegroup</span><span class="w"> </span><span class="p">(</span><span class="n">fileID</span><span class="p">);</span><span class="w">  </span><span class="cm">/* data */</span>
<span class="linenos">24</span><span class="w">      </span><span class="n">NXclosegroup</span><span class="w"> </span><span class="p">(</span><span class="n">fileID</span><span class="p">);</span><span class="w">  </span><span class="cm">/* Scan */</span>
<span class="linenos">25</span><span class="w">   </span><span class="n">NXclose</span><span class="w"> </span><span class="p">(</span><span class="o">&amp;</span><span class="n">fileID</span><span class="p">);</span>
<span class="linenos">26</span><span class="w">   </span><span class="k">return</span><span class="p">;</span>
<span class="linenos">27</span><span class="p">}</span>
</pre></div>
</div>
<p>More examples of writing NeXus data files can be found in
the <em>Examples</em> chapter of the NeXus Reference Documentation. <a class="footnote-reference brackets" href="#refdoc" id="id13" role="doc-noteref"><span class="fn-bracket">[</span>7<span class="fn-bracket">]</span></a></p>
</section>
<section id="more-information">
<h2>More Information<a class="headerlink" href="#more-information" title="Permalink to this heading">¶</a></h2>
<p>Did we get you interested? Here is where you can get more information.
Our main entry point is the NeXus WWW-site at <a class="reference external" href="https://www.nexusformat.org/">https://www.nexusformat.org/</a>
where you can find more information, download the NeXus API,
NeXus User Manual <a class="footnote-reference brackets" href="#manual" id="id14" role="doc-noteref"><span class="fn-bracket">[</span>6<span class="fn-bracket">]</span></a> and
NeXus Reference Documentation. <a class="footnote-reference brackets" href="#refdoc" id="id15" role="doc-noteref"><span class="fn-bracket">[</span>7<span class="fn-bracket">]</span></a></p>
<p>If you encounter problems then please help us make NeXus better. Report
your problem to the NeXus mailing list (<a class="reference external" href="mailto:nexus&#37;&#52;&#48;nexusformat&#46;org">nexus<span>&#64;</span>nexusformat<span>&#46;</span>org</a>).
Problems that we never know about have absolutely no chance of getting resolved.</p>
<p>NeXus is a voluntary effort. Thus, if you have spare time and are willing
to lend us a hand, you are more welcome to contact us via <a class="reference external" href="mailto:nexus-committee&#37;&#52;&#48;nexusformat&#46;org">nexus-committee<span>&#64;</span>nexusformat<span>&#46;</span>org</a></p>
<section id="who-is-behind-nexus">
<h3>Who is behind NeXus?<a class="headerlink" href="#who-is-behind-nexus" title="Permalink to this heading">¶</a></h3>
<p>NeXus was developed from three independent proposals from Jonathan Tischler,
APS, Przemek Klosowski, NIST and Mark Koennecke, ISIS (now PSI) by an
international team of scientists during a series of SoftNess workshops
in 1994 - 1996. More work was done during NOBUGS conferences. Since 2001,
NeXus is overseen by the NeXus International Advisory Committee (NIAC)
which meets once a  year. The NIAC strives to have a representative for
each participating facility. The NIAC has a constitution which you can
find on the NeXus WWW site.</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="nexus" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>NeXus: <a class="reference external" href="https://www.nexusformat.org/">https://www.nexusformat.org/</a></p>
</aside>
<aside class="footnote brackets" id="hdf5" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">2</a><span class="fn-bracket">]</span></span>
<p>HDF-5: <a class="reference external" href="http://www.hdfgroup.org/HDF5/">http://www.hdfgroup.org/HDF5/</a></p>
</aside>
<aside class="footnote brackets" id="nexusformat" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id6">3</a><span class="fn-bracket">]</span></span>
<p><em>nexusformat</em>: <a class="reference external" href="https://nexpy.github.io/nexpy/">https://nexpy.github.io/nexpy/</a></p>
</aside>
<aside class="footnote brackets" id="h5py" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id7">4</a><span class="fn-bracket">]</span></span>
<p><em>h5py</em>: <a class="reference external" href="https://www.h5py.org/">https://www.h5py.org/</a></p>
</aside>
<aside class="footnote brackets" id="lrcs3701" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id8">5</a><span class="fn-bracket">]</span></span>
<p><code class="docutils literal notranslate"><span class="pre">lrcs3701.nx5</span></code> (NeXus HDF-5 data file):
<a class="reference external" href="https://github.com/nexusformat/exampledata/blob/master/IPNS/LRMECS/hdf5/lrcs3701.nx5">https://github.com/nexusformat/exampledata/blob/master/IPNS/LRMECS/hdf5/lrcs3701.nx5</a></p>
</aside>
<aside class="footnote brackets" id="manual" role="note">
<span class="label"><span class="fn-bracket">[</span>6<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id3">1</a>,<a role="doc-backlink" href="#id11">2</a>,<a role="doc-backlink" href="#id14">3</a>)</span>
<p>NeXus User Manual:
<a class="reference external" href="https://manual.nexusformat.org/user_manual.html">https://manual.nexusformat.org/user_manual.html</a></p>
</aside>
<aside class="footnote brackets" id="refdoc" role="note">
<span class="label"><span class="fn-bracket">[</span>7<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id4">1</a>,<a role="doc-backlink" href="#id10">2</a>,<a role="doc-backlink" href="#id12">3</a>,<a role="doc-backlink" href="#id13">4</a>,<a role="doc-backlink" href="#id15">5</a>)</span>
<p>NeXus Reference Documentation:
<a class="reference external" href="https://manual.nexusformat.org/ref_doc.html">https://manual.nexusformat.org/ref_doc.html</a></p>
</aside>
<aside class="footnote brackets" id="v3" role="note">
<span class="label"><span class="fn-bracket">[</span>8<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id5">1</a>,<a role="doc-backlink" href="#id9">2</a>)</span>
<p>Finding the plottable data:
<a class="reference external" href="https://manual.nexusformat.org/datarules.html#version-3">https://manual.nexusformat.org/datarules.html#version-3</a></p>
</aside>
</aside>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="#">
              <img class="logo" src="_static/nexuslogo.png" alt="Logo"/>
            </a></p>
  <div>
    <h3><a href="#">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">NeXus for the Impatient</a><ul>
<li><a class="reference internal" href="#why-nexus">Why NeXus?</a></li>
<li><a class="reference internal" href="#nexus-concepts">NeXus Concepts</a><ul>
<li><a class="reference internal" href="#the-nexus-file-hierarchy">The NeXus File Hierarchy</a><ul>
<li><a class="reference internal" href="#the-nexus-raw-data-file-hierarchy">The NeXus Raw Data File Hierarchy</a></li>
</ul>
</li>
<li><a class="reference internal" href="#what-goes-into-a-nexus-file">What goes into a NeXus File?</a><ul>
<li><a class="reference internal" href="#the-nexus-processed-data-hierarchy">The NeXus Processed Data Hierarchy</a></li>
</ul>
</li>
<li><a class="reference internal" href="#scans-in-nexus">Scans in NeXus</a></li>
<li><a class="reference internal" href="#finding-the-plottable-data">Finding the plottable data</a></li>
</ul>
</li>
<li><a class="reference internal" href="#nexus-benefits">NeXus Benefits</a></li>
<li><a class="reference internal" href="#reading-nexus-files">Reading NeXus Files</a></li>
<li><a class="reference internal" href="#writing-nexus-files">Writing NeXus Files</a></li>
<li><a class="reference internal" href="#more-information">More Information</a><ul>
<li><a class="reference internal" href="#who-is-behind-nexus">Who is behind NeXus?</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="#">NeXus for the Impatient</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">NeXus for the Impatient</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2014-2022, http://nexusformat.org.
      Last updated on Jun 21, 2023.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.0.1.
    </div>
  </body>
</html>